<p-toast />
<div
  class="bg-white container h-[100%] lg:overflow-hidden w-full flex-1 flex flex-col overflow-x-hidden"
  [@fadeSlideInOut]="isVisible ? 'in' : 'out'"
>
  <div class="flex flex-row items-center justify-between mb-6 lg:mb-0">
    <h3 class="text-[1.1rem] md:text-[1.3rem] text-[#0078BD] font-semibold">
      Manage Transactions
    </h3>

    <div class="hidden lg:flex items-center gap-3 md:mt-0">
      <button
        class="flex items-center py-2 px-3 gap-4 rounded-lg bg-[#0078BD] cursor-pointer flex text-[white] font-medium hover:bg-[#005f8a] transition duration-300"
        (click)="showAddTransactionDialog()"
      >
        <i class="fa-solid fa-circle-plus text-[0.9rem]"></i>
        <span class="text-[0.9rem]">Add New</span>
      </button>
      @if(displayTableData().length > 0){
      <button
        class="flex items-center py-2 px-3 gap-4 rounded-lg bg-red-500 cursor-pointer flex text-[white] font-medium hover:bg-red-600 transition duration-300"
        (click)="deleteAllTransactions($event)"
      >
        <i class="fa-solid fa-times text-[0.9rem]"></i>
        <span class="text-[0.9rem]">Delete All</span>
      </button>
      }
    </div>
    <select
      (change)="onActionSelectChange($event)"
      class="block lg:hidden text-[0.8rem] cursor-pointer focus:outline-none rounded-lg w-[35%] lg:w-[20%] py-1 px-2 border-1 border-gray-300 font-medium focus:border-[#0078BD] transition duration-300"
    >
      <option value="0">Choose Action</option>
      <option value="1" class="text-[#0078BD] font-medium">
        Add Transaction
      </option>
      <option value="2" class="text-red-600 font-medium">
        Delete All Transactions
      </option>
    </select>
  </div>
  <div class="w-full flex align-center justify-center gap-4 mt-0 lg:mt-5">
    @for(tab of tabHeaders; track tab.value){
    <button
      type="button"
      type="button"
      class="text-[0.9rem] md:text-[1.1rem] cursor-pointer"
      [ngClass]="tab.value == selectedTab() ? 'active' : 'tab-btn'"
      (click)="onTabChange(tab)"
    >
      {{ tab.label }}
    </button>
    }
  </div>

  <div class="table-container">
    <ag-grid-angular
      class="ag-theme-alpine"
      style="height: 100%; width: 100%"
      [rowData]="displayTableData()"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [rowHeight]="rowHeight"
      [rowClass]="rowClass"
      (gridReady)="getTransactionTableData($event)"
      [context]="{ componentParent: this }"
      [pagination]="true"
      [paginationPageSize]="paginationPageSize"
      [paginationPageSizeSelector]="paginationPageSizeSelector"
      [paginationNumberFormatter]="paginationNumberFormatter"
      [animateRows]="true"
      (firstDataRendered)="onFirstDataRendered($event)"
    ></ag-grid-angular>
  </div>
</div>

<app-add-transaction
  [(showAddTransactionModal)]="showAddTransactionModal"
  (formDetails)="onAddTransaction($event)"
  [selectedTransaction]="selectedTransaction"
  [isEditMode]="isEditMode()"
  [isCreateMode]="isCreateMode()"
  [isViewMode]="isViewMode()"
></app-add-transaction>

<p-confirmDialog />
